<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Password Criteria Checker</title>
  <link rel="stylesheet" href="https://pyscript.net/2023.05.1/pyscript.css" />
  <script defer src="https://pyscript.net/2023.05.1/pyscript.js"></script>
  <style>
    body { font-family: Arial; background: #1e1e1e; color: white; padding: 20px; }
    input, button { padding: 10px; font-size: 1em; margin: 5px 0; width: 100%; }
    pre { background: #2e2e2e; padding: 15px; border-radius: 5px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>Password Criteria Checker</h2>
  <input id="password_input" type="password" placeholder="Enter a password" />
  <button py-click="on_click">Check Password</button>
  <pre id="output"></pre>

  <py-script>
    import string
    from pyscript import Element

    def has_three_repeating_chars(pw):
        return any(pw[i] == pw[i+1] == pw[i+2] for i in range(len(pw)-2))

    common = {"123456", "qwerty", "welcome", "admin", "tom's website"}

    def check_password(pw):
        errors = []
        if len(pw) < 12:
            errors.append("Too short (need 12+ chars)")
        if not any(c.isupper() for c in pw):
            errors.append("Missing uppercase")
        if not any(c.islower() for c in pw):
            errors.append("Missing lowercase")
        if not any(c.isdigit() for c in pw):
            errors.append("Missing number")
        if not any(c in string.punctuation for c in pw):
            errors.append("Missing special char")
        if "password" in pw.lower():
            errors.append("Contains 'password'")
        if has_three_repeating_chars(pw):
            errors.append("Three repeating characters in a row")
        if pw.lower() in common:
            errors.append("Too common / easy to guess")

        if not errors:
            return "✅ Password meets all requirements!"
        return "❌ Issues:\n- " + "\n- ".join(errors)

    def on_click(*events):
        pw = Element("password_input").element.value
        Element("output").element.innerText = check_password(pw)
  </py-script>
</body>
</html>
